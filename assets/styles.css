/* =============================================================================
   2001: Project — Site Styles (Polished)
   ----------------------------------------------------------------------------- */

/* 1) Reset */
*,*::before,*::after { box-sizing: border-box; }
html,body { margin: 0; padding: 0; }

/* 2) Design Tokens ---------------------------------------------------------- */
:root {
  /* Colors */
  --bg: hsl(0, 0%, 95%);
  --text: hsl(0, 0%, 5%);
  --muted: #64748b;
  --card: #f8fafc;
  --border: #e2e8f0;
  --accent: hsl(0, 90%, 50%);
  --accent-2: hsl(195, 53%, 50%);
  --link: #2563eb;
  --code: #111827;

  /* Typography */
  --font-body: 'Nunito Sans', ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, Noto Sans, Arial;
  --font-heading: 'IBM Plex Sans', ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, Noto Sans, Arial;
  --font-siteheader: 'League Spartan', ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, Noto Sans, Arial;

  --leading: 1.6;
  --fs-1: clamp(1.75rem, 1.2rem + 2vw, 2.25rem);
  --fs-2: clamp(1.35rem, 1.1rem + 1vw, 1.6rem);
  --fs-3: 1.15rem;
  --fs-body: 1rem;

  /* Spacing */
  --space-1: .25rem;
  --space-2: .5rem;
  --space-3: .75rem;
  --space-4: 3rem;
  --space-5: 1.25rem;
  --space-6: 1.5rem;
  --space-8: 2rem;

  /* Radius & shadows */
  --radius: 8px;
  --line-thick: 3px;
  --radius-sm: 2px;
  --shadow-1: 0 1px 2px rgba(0,0,0,.05);
  --shadow-2: 0 6px 18px rgba(0,0,0,.08);
  --shadow-pop: 0 12px 28px rgba(0,0,0,.16);

  /* Shrink tuning */
  --title-nudge: 0.30rem;  /* push DOWN a bit in shrink for visual centering */

  /* Header button controls */
  --nav-pad-x: 1rem;     /* widthwise padding */
  --nav-pad-y: 0.5rem;     /* heightwise padding */
  --nav-gap: 8px;
  --header-gap-top: 1rem;
  --header-gap-bottom: 1rem;
}

/* Dark theme tokens */
.dark {
  --bg: hsl(0, 0%, 5%);
  --text: hsl(0, 0%, 95%);
  --muted: #94a3b8;
  --card: #111827;
  --border: #1f2937;
  --accent: hsl(0, 90%, 50%);
  --link: #60a5fa;
  --code: #e5e7eb;
}

/* 3) Base Elements ---------------------------------------------------------- */
body {
  font-family: var(--font-body);
  background: var(--bg);
  color: var(--text);
  line-height: var(--leading);
  font-size: var(--fs-body);
}

h1,h2,h3,h4,h5,h6,
.prose h1,.prose h2,.prose h3,.prose h4,.prose h5,.prose h6 {
  font-family: var(--font-heading);
}

a { color: var(--link); text-decoration: none; }
a:focus-visible { outline: 2px solid var(--accent); outline-offset: 3px; border-radius: .35rem; }

img { max-width: 100%; display: block; height: auto; }

/* 4) Layout ----------------------------------------------------------------- */
.container { max-width: 1100px; margin: 0 auto; padding: var(--space-5); }

header.site-header {
  position: sticky; top: 0; z-index: 10;
  border-bottom: 1px solid var(--border);
  backdrop-filter: saturate(180%) blur(6px);
  background: var(--bg);
  transition: background-color .25s ease, border-color .25s ease;
  will-change: background-color, border-color;
  backface-visibility: hidden;

  /* theme icon big by default */
  --theme-icon-size: 3.5rem;
}

header.site-header.shrink {
  /* smaller when shrunk */
  --theme-icon-size: 2.25rem;
}

/* Give the header its own container padding we can shrink */
header.site-header .container {
  padding: var(--header-gap-top) var(--space-5) var(--header-gap-bottom);
}

header.site-header.shrink .container {
  padding: calc(var(--header-gap-top) * 0.25) var(--space-5) calc(var(--header-gap-bottom) * 0.25);
}


/* Header inner grid: always center vertically */
.header-inner {
  display: grid;
  grid-template-columns: 1fr auto;
  gap: var(--space-4);
  align-items: center;   /* <-- was 'end' before */
}

/* Title / theme cluster */
.title-left {
  display: flex;
  align-items: center;   /* <-- always center */
  gap: 1rem;
}

/* Remove large-header overrides */
header.site-header:not(.shrink) .title-left {
  align-items: center;   /* override flex-end */
}

header.site-header:not(.shrink) .site-title {
  justify-content: center; /* instead of flex-end */
}

/* Site title: stacked by default, scaled on shrink */
.site-title {
  display: flex;
  flex-direction: column;        /* stacked by default */
  align-items: flex-start;
  text-decoration: none;
  font-family: var(--font-siteheader);
  color: var(--text);
  line-height: 1;
  transform-origin: left center;
}

/* Hover accent on site title */
.site-title:hover,
.site-title:hover .title-main,
.site-title:hover .title-sub {
  color: var(--accent);
}

.site-title .title-main {
  font-size: 2.5rem;
  font-weight: 800;
  text-transform: uppercase;
  margin: 0;
  line-height: 1;
}

.site-title .title-sub {
  font-size: 1.75rem;
  font-weight: 900;
  color: var(--text);
  margin-top: 0rem;
  text-transform: uppercase;
  line-height: 0;
}

/* Large header baseline alignment */
header.site-header:not(.shrink) .title-left { align-items: flex-end; }
header.site-header:not(.shrink) .site-title { justify-content: flex-end; }
header.site-header:not(.shrink) .site-title .title-main,
header.site-header:not(.shrink) .site-title .title-sub { line-height: 1; }

/* Optional modern trimming */
@supports (text-box-trim: both) and (text-box-edge: cap alphabetic) {
  header.site-header:not(.shrink) .site-title .title-sub {
    text-box-trim: both;
    text-box-edge: cap alphabetic;
    line-height: normal;
  }
}

/* Theme toggle icon (buttonless look) */
.theme-toggle {
  font-family: var(--font-siteheader);
  font-weight: 500;
  font-size: var(--theme-icon-size);
  line-height: 1;
  color: var(--text);
  border: 0;
  background: transparent;
  box-shadow: none;
  padding: 0;
  margin: 0;
  cursor: pointer;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  width: calc(var(--theme-icon-size) + .5rem);
  height: calc(var(--theme-icon-size) + .5rem);
  border-radius: 50%;
  transition: color .15s ease, transform .08s ease, font-size .15s ease;
}
.theme-toggle:hover { color: var(--accent); }

/* Right side nav (inline only) */
.main-nav {
  display: flex;
  gap: var(--nav-gap);
  flex-wrap: wrap;
}

.main-nav a {
  font-family: var(--font-siteheader); /* match site title */
  font-weight: 700;
  font-size: 0.75rem;
  line-height: 1;
  text-transform: uppercase;
  letter-spacing: 0.25em;

  display: inline-flex;
  align-items: center;
  justify-content: center;

  color: var(--text);
  border: var(--line-thick) solid var(--accent);
  padding: calc(var(--nav-pad-y)*1.3) var(--nav-pad-x) var(--nav-pad-y) var(--nav-pad-x);
  border-radius: var(--radius-sm);
  transition: background-color 0.2s ease, color 0.2s ease;
}

.main-nav a:hover {
  background: var(--accent);
  color: #fff;
}

.content { padding-block: var(--space-5) calc(var(--space-8) + var(--space-3)); }

footer { border-top: 1px solid var(--border); color: var(--muted); padding: var(--space-6) 0; font-size: .9rem; }

/* 5) Components ------------------------------------------------------------- */
.cards { display: grid; grid-template-columns: repeat(auto-fill, minmax(260px, 1fr)); gap: var(--space-4); }
.card {
  border: 1px solid var(--border);
/*  background: var(--card);
  border-radius: var(--radius);*/
  overflow: clip;
  display: flex; flex-direction: column;
  min-height: 240px;
  /*box-shadow: var(--shadow-1);*/
  /*transition: transform .08s ease, box-shadow .2s ease;*/
}
.card:hover { transform: translateY(-2px); box-shadow: var(--shadow-2); }
.card img { width: 100%; height: 160px; object-fit: cover; background: #0b0b0b; }
.card .pad { padding: 1rem 0 1rem 0; }
.card h3 { margin: 0 0 .35rem; font-size: 1.05rem; }
.meta { color: var(--muted); font-size: .9rem; }

/* Tag list used in cards/post meta */
.tags { display: flex; flex-wrap: wrap; gap: .35rem; margin-top: .5rem; }
.tag { font-size: .8rem; padding: .15rem .45rem; border-radius: .5rem; background: color-mix(in oklab, var(--accent) 15%, var(--card)); border: 1px solid var(--border); }

/* --- Tag Cloud (page) ----------------------------------------------------- */
/* Stacked rectangles with inverted colors + beveled corners */
.tag-cloud {
  display: flex;
  flex-wrap: wrap;
  gap: .4rem .4rem;
}

.tag-cloud a {
  display: inline-flex;
  align-items: center;
  padding: .35rem .65rem;
  font-size: .85rem;
  font-weight: 700;
  line-height: 1;
  text-decoration: none;

  color: var(--bg);            /* text uses background color */
  background: var(--text);     /* background uses text color */
  border: 0;
  border-radius: var(--radius); /* bevel */
  box-shadow: var(--shadow-1);
}

.tag-cloud a:hover,
.tag-cloud a:focus-visible {
  background: var(--accent);
  color: #fff;
  box-shadow: var(--shadow-2);
  outline: none;
}

/* Buttons */
.button { display: inline-flex; align-items: center; gap: .5rem; padding: .5rem .8rem; border-radius: .6rem; border: 1px solid var(--border); background: var(--card); color: var(--text); box-shadow: var(--shadow-1); }
.button:hover { box-shadow: var(--shadow-2); }
.button:focus-visible { outline: 2px solid var(--accent); outline-offset: 2px; }

/* Inputs */
input[type="search"], input[type="text"] {
  width: 100%; padding: .55rem .7rem; border: 1px solid var(--border); background: var(--card); color: var(--text); border-radius: .6rem;
}
input[type="search"]:focus-visible, input[type="text"]:focus-visible { outline: 2px solid var(--accent); outline-offset: 2px; }

/* 6) Markdown “prose” ------------------------------------------------------- */
.prose { max-width: 68ch; }
.prose h1 { font-size: var(--fs-1); line-height: 1.2; margin: 0 0 var(--space-4); }
.prose h2 { font-size: var(--fs-2); line-height: 1.25; margin: var(--space-6) 0 var(--space-3); }
.prose h3 { font-size: var(--fs-3); line-height: 1.3; margin: var(--space-5) 0 var(--space-3); }
.prose p  { margin: var(--space-4) 0; }
.prose ul, .prose ol { padding-left: 1.25rem; margin: var(--space-4) 0; }
.prose li { margin: .35rem 0; }
.prose img { border-radius: .05rem; box-shadow: var(--shadow-1); }
.prose blockquote { margin: var(--space-5) 0; padding: var(--space-3) var(--space-4); border-left: 3px solid var(--accent); background: color-mix(in oklab, var(--accent) 8%, var(--card)); }
.prose pre { background: #0b1220; color: var(--code); padding: var(--space-4); border-radius: .75rem; overflow: auto; }
.prose code { background: color-mix(in oklab, var(--accent) 10%, var(--card)); padding: .1rem .25rem; border-radius: .35rem; }

/* 7) Utilities -------------------------------------------------------------- */
.visually-hidden { position:absolute !important; height:1px; width:1px; overflow:hidden; clip:rect(1px,1px,1px,1px); white-space:nowrap; }

/* 8) Media Queries & Motion ------------------------------------------------- */
@media (max-width: 700px) {
  .header-inner { grid-template-columns: 1fr auto; }
}

/* Respect reduced motion */
@media (prefers-reduced-motion: reduce) {
  * { animation-duration: .01ms !important; animation-iteration-count: 1 !important; transition-duration: .01ms !important; scroll-behavior: auto !important; }
}

/* 9) Shrinking header behavior --------------------------------------------- */
header.site-header.shrink .container { padding: .35rem var(--space-5); }

/* In shrink mode: inline title, icon scales with it, nav buttons shorter */
header.site-header.shrink .site-title {
  flex-direction: row;
  align-items: center;
  gap: 0.4rem;
}

/* Scale the whole left cluster so the icon shrinks with the title */
header.site-header.shrink .title-left {
  transform-origin: left center;
  transform: translateY(var(--title-nudge)) scale(0.78);
}

/* Shorter buttons in shrink */
header.site-header.shrink .main-nav a {
  padding: calc(var(--nav-pad-y)*0.9) calc(var(--nav-pad-x) * 0.8) calc(var(--nav-pad-y) * 0.65) calc(var(--nav-pad-x) * 0.8);
}

/* Center align when shrunk */
header.site-header.shrink .header-inner { align-items: center; }

/* Slightly lighter backdrop in shrink (optional) */
header.site-header.shrink { backdrop-filter: saturate(140%) blur(4px); }
